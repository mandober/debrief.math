# Unrestricted grammar

https://en.wikipedia.org/wiki/Unrestricted_grammar

In automata theory, the class of *unrestricted grammars* (also called semi-Thue, type-0 or phrase structure grammars) is the most general class of grammars in the Chomsky hierarchy. No restrictions are made on the productions of an unrestricted grammar, other than each of their *left-hand sides being non-empty*. This grammar class can generate *recursively enumerable languages*.

## Formal definition

An unrestricted grammar is a formal grammar `G = (N, T, P, S)`, where
- `N` is a finite set of nonterminal symbols
- `T` is a finite set of terminal symbols, and `N ⋂ T = ∅`.   
  Note: Actually, the requirement than N and T are disjoint is not strictly necessary since unrestricted grammars make no real distinction between N and T. The designation exists purely so that one knows when to stop generating sentential forms of the grammar; more precisely, the language L(G) recognized by G is restricted to strings of terminal symbols.
- `P` is a finite set of production rules of the form `α → β`, where `α` and
  `β` are strings of symbols in `N ⋃ T` and `α ≠ ε`
- `S` is a specially designated start symbol and `S ∈ N`

As the name implies, there are no real restrictions on the types of production rules that unrestricted grammars can have.

Note: While Hopcroft and Ullman (1979) do not mention the cardinalities of N, T, P explicitly, the proof of their Theorem 9.3 (construction of an equivalent Turing machine from a given unrestricted grammar, p.221, cf. below, the section on Equivalence to Turing machines) tacitly requires finiteness of P and finite lengths of all strings in rules of P. Any member of N or T that does not occur in P can be omitted without affecting the generated language.

## Equivalence to Turing machines

>Unrestricted grammars characterize *recursively enumerable languages*.

This is the same as saying that for every unrestricted grammar G there exists some Turing machine capable of recognizing L(G) and vice versa.

Given an unrestricted grammar, such a Turing machine is simple enough to construct, as a two-tape nondeterministic Turing machine. The first tape contains the input word `w` to be tested, and the second tape is used by the machine to generate sentential forms from `G`. The Turing machine then does the following:
1. Start at the left of the second tape and repeatedly choose to move right or select the current position on the tape.
2. Nondeterministically choose a production β→γ from the productions in G.
3. If β appears at some position on second tape, replace β by γ at that point, possibly shifting symbols on the tape left or right depending on the relative lengths of β and γ (e.g. if β is longer than γ, shift the tape symbols left).
4. Compare the resulting sentential form on tape 2 to the word on tape 1. If they match, then the Turing machine accepts the word. If they don't, the Turing machine will go back to step 1.

It is easy to see that this Turing machine will generate all and only the sentential forms of G on its second tape after the last step is executed an arbitrary number of times, thus the language L(G) must be recursively enumerable.

The reverse construction is also possible. Given some Turing machine, it is possible to create an equivalent unrestricted grammar  which even uses only productions with one or more non-terminal symbols on their left-hand sides.

Therefore, an arbitrary unrestricted grammar can always be equivalently converted to obey the latter form, by converting it to a Turing machine and back again. Some authors use the latter form as definition of unrestricted grammar.

## Computational properties

The decision problem of whether a given string can be generated by a given unrestricted grammar is equivalent to the problem of whether it can be accepted by the Turing machine equivalent to the grammar. The latter problem is called the Halting problem and is undecidable.

>Recursively enumerable languages are closed under
- Kleene star
- concatenation
- union
- intersection

but not under set difference (see https://en.wikipedia.org/wiki/Recursively_enumerable_language#Closure_properties).

The equivalence of unrestricted grammars to Turing machines implies the existence of a *universal unrestricted grammar*, a grammar capable of accepting any other unrestricted grammar's language given a description of the language.

For this reason, it is theoretically possible to build a programming language based on unrestricted grammars (e.g. programming language `Thue`).
